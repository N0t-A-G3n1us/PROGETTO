<!DOCTYPE html>
<html lang="it">
<head>
	<meta charset="UTF-8">
	<h>
		Prova di render  <br><br>
	</h>
	
</head>

<body>

	<input type="text" placeholder="inserisci cosa cercare" id="text">

	<button  onclick="send()"> INVIO </button> 
	<br/>
	<table>
	<tbody>
	<tr>
	<td>	<p id="resArea"></p>	</td>
	</tr>
	<tr> 
	<td>	<h1 id="waitArea"> </h1>	</td>
	</tr>
	<tr>
	<td>	<div id="imgArea"> </div>	</td>
	</tr>
	</tbody>
	</table>
		
		

	
	<script type="text/javascript">
		
		const myPort=5001;
		var sock= new WebSocket("ws://localhost:"+myPort.toString());
		
		var div1=document.getElementById('resArea');
		var div2=document.getElementById('imgArea');
		var div3=document.getElementById('waitArea');


		sock.onmessage = function(event){
			div2.innerHTML="";
			var strReceived=event.data.toString();
			console.log("Browser received: "+strReceived);
			if(strReceived.substring(0,5)=="[IMG]"){
				
				var parsed=strReceived.substring(5,strReceived.length).split("@");
				for(i=0; i < parsed.length ; i++)
					div2.innerHTML+= "<img src=" + parsed[i]+">" +"</img>" + "<br/>";
				

				//div2.innerHTML+=parsed;
			}
			else if (strReceived.substring(0,5)=="[STR]"){
				div1.innerHTML=strReceived.substring(5,strReceived.length)+" ";
				
				}

			

		}

		


		function send(){
			var text = document.getElementById('text').value;
			sock.send(text);
		}


	</script>
</body>
